<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Views · Daf.jl v0.1.0</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="Daf.jl v0.1.0 logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Daf.jl v0.1.0</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Daf</a></li><li><a class="tocitem" href="data.html">Data</a></li><li><a class="tocitem" href="read_only.html">Read-only</a></li><li class="is-active"><a class="tocitem" href="views.html">Views</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="chains.html">Chains</a></li><li><a class="tocitem" href="computations.html">Computations</a></li><li><a class="tocitem" href="contracts.html">Contracts</a></li><li><a class="tocitem" href="formats.html">Formats</a></li><li><a class="tocitem" href="memory_format.html">Memory Format</a></li><li><a class="tocitem" href="queries.html">Queries</a></li><li><a class="tocitem" href="registry.html">Operations registry</a></li><li><a class="tocitem" href="operations.html">Query operations</a></li><li><a class="tocitem" href="storage_types.html">Storage types</a></li><li><a class="tocitem" href="matrix_layouts.html">Matrix layouts</a></li><li><a class="tocitem" href="oprec.html">Operator precedence parser</a></li><li><a class="tocitem" href="messages.html">Messages</a></li><li><a class="tocitem" href="example_data.html">Example data</a></li><li><a class="tocitem" href="todo.html">TODO</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="views.html">Views</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="views.html">Views</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.md?plain=1#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Views"><a class="docs-heading-anchor" href="#Views">Views</a><a id="Views-1"></a><a class="docs-heading-anchor-permalink" href="#Views" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Daf.Views" href="#Daf.Views"><code>Daf.Views</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Create a different view of <code>Daf</code> data using queries. This is a very flexible mechanism which can be used for a variety of use cases. A simple way of using this is to view a subset of the data as a <code>Daf</code> data set. A variant of this also renames the data properties to adapt them to the requirements of some computation. This makes it simpler to create such tools (using fixed, generic property names) and apply them to arbitrary data (with arbitrary specific property names).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.DafView" href="#Daf.Views.DafView"><code>Daf.Views.DafView</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct DafView(daf::F) &lt;: DafReader where {F &lt;: DafReader}</code></pre><p>A read-only wrapper for any <a href="formats.html#Daf.Formats.DafReader"><code>DafReader</code></a> data, which exposes an arbitrary view of it as another <a href="formats.html#Daf.Formats.DafReader"><code>DafReader</code></a>. This isn&#39;t typically created manually; instead call <a href="views.html#Daf.Views.viewer"><code>viewer</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL37-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.viewer" href="#Daf.Views.viewer"><code>Daf.Views.viewer</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">viewer(
    name::AbstractString,
    daf::DafReader;
    [scalars::AbstractVector{Pair{String, Union{String, Nothing}}} = [],
    axes::AbstractVector{Pair{String, Union{String, Nothing}}} = [],
    vectors::AbstractVector{Pair{Tuple{String, String}, Union{String, Nothing}}} = []]
    matrices::AbstractVector{Pair{Tuple{String, String, String}, Union{String, Nothing}}} = []]
)::DafView</code></pre><p>Wrap <code>daf</code> data with a read-only <a href="views.html#Daf.Views.DafView"><code>DafView</code></a>. The exposed view is defined by a set of queries applied to the original data. These queries are evaluated only when data is actually accessed. Therefore, creating a view is a relatively cheap operation.</p><p>Queries are listed separately for scalars, axes, vector and matrix properties, as follows:</p><p><em>Scalars</em> are specified as a list of pairs (similar to initializing a <code>Dict</code>). The order of the pairs matter (last one wins). If the key is <code>&quot;*&quot;</code>, then it is replaced by all the names of the scalar properties of the wrapped <code>daf</code> data. If the value is <code>nothing</code>, then the scalar will <em>not</em> be exposed by the view. If the value is <code>&quot;=&quot;</code>, then the scalar will be exposed with the same value as in the original <code>daf</code> data. Otherwise the value is any valid <a href="data.html#Daf.Data.scalar_query"><code>scalar_query</code></a>.</p><p>That is, saying <code>&quot;*&quot; =&gt; &quot;=&quot;</code> will expose all the original <code>daf</code> data scalars from the view. Following this by saying <code>&quot;version&quot; =&gt; nothing</code> will hide the <code>version</code> from the view. Add <code>&quot;total_umis&quot; =&gt; &quot;cell, gene @ UMIs %&gt; Sum %&gt; Sum&quot;</code> to expose a <code>total_umis</code> scalar containing the total sum of all UMIs of all genes in all cells, etc.</p><p><em>Axes</em> are specified similarly, except that the value should be a <a href="data.html#Daf.Data.vector_query"><code>vector_query</code></a> instead of a <a href="data.html#Daf.Data.scalar_query"><code>scalar_query</code></a>. This query should be for the names of the entries of the axis, so a <code>@ name</code> suffix is automatically added to the end of the value.</p><p>That is, writing <code>&quot;gene&quot; =&gt; &quot;gene &amp; marker&quot;</code> will restrict the exposed <code>gene</code> axis to only the <code>marker</code> genes. This ability to restrict a view to a subset of the entries is extremely useful.</p><p><em>Vectors</em> are specified similarly, but require a key specifying both an axis and a property name. The axis must be exposed by the view (based on the <code>axes</code> parameter). If the axis is <code>&quot;*&quot;</code>, it is replaces by all the exposed axis names specified by the <code>axes</code> parameter. Similarly, if the name is <code>&quot;*&quot;</code> (e.g., <code>(&quot;gene&quot;, &quot;*&quot;)</code>), then  it is replaced by all the vector properties of the axis. Therefore if the key is <code>(&quot;*&quot;, &quot;*&quot;)</code>, all vector properties of all the exposed axes will also be exposed; to expose all vector properties of all axes, write <code>axes=[&quot;*&quot; =&gt; &quot;=&quot;], vectors=[(&quot;*&quot;, &quot;*&quot;) =&gt; &quot;=&quot;]</code>.</p><p>The value for vectors must be a vector query based on the appropriate axis; a value of <code>&quot;=&quot;</code> is again used to expose the property as-is. Since the axis might be specified by a query itself, it is automatically added (including the <code>@</code> operator) as a prefix for the value; for example, specifying that <code>axes = [&quot;gene&quot; =&gt; &quot;gene &amp; marker&quot;]</code>, and then that <code>vectors = [(&quot;gene&quot;, &quot;forbidden&quot;) =&gt; &quot;lateral&quot;]</code>, then the view will expose a <code>forbidden</code> vector property for the <code>gene</code> axis, by applying the query <code>gene &amp; marker @ lateral</code> to the original <code>daf</code> data.</p><p>This gets trickier when using a query reducing a matrix to a vector. In these cases, the value should contain a <code>@</code> but only specify the rows axis, and the columns axis will be added automatically. For example, given the same <code>axes</code> as above, and <code>vectors = [(&quot;gene&quot;, &quot;total_umis&quot;) =&gt; &quot;cell @ UMIS %&gt; Sum&quot;]</code>, then the view will expose a <code>total_umis</code> vector property for the <code>gene</code> axis, by applying the query <code>cell, gene &amp; marker @ UMIs %&gt; Sum</code> to the original <code>daf</code> data.</p><p><em>Matrices</em> require a key specifying both axes and a property name. The axes must both be exposed by the view (based on the <code>axes</code> parameter). Again if any or both of the axes are <code>&quot;*&quot;</code>, they are replaced by all the exposed axes (based on the <code>axes</code> parameter), and likewise if the name is <code>&quot;*&quot;</code>, it replaced by all the matrix properties of the axes.</p><p>The value for matrices can again be <code>&quot;=&quot;</code> to expose the property as is, or the suffix of a matrix query. The full query will have the axes queries appended automatically, similarly to the above. The order of the axes does not matter, so <code>matrices = [(&quot;gene&quot;, &quot;cell&quot;, &quot;UMIs&quot;) =&gt; &quot;=&quot;]</code> has the same effect as <code>matrices = [(&quot;cell&quot;, &quot;gene&quot;, &quot;UMIs&quot;) =&gt; &quot;=&quot;]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL72-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.ALL_SCALARS" href="#Daf.Views.ALL_SCALARS"><code>Daf.Views.ALL_SCALARS</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A pair to use in the <code>scalars</code> parameter of <a href="views.html#Daf.Views.viewer"><code>viewer</code></a> to specify the view exposes all the base data scalars.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL52-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.ALL_AXES" href="#Daf.Views.ALL_AXES"><code>Daf.Views.ALL_AXES</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A pair to use in the <code>axes</code> parameter of <a href="views.html#Daf.Views.viewer"><code>viewer</code></a> to specify the view exposes all the base data axes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL57-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.ALL_VECTORS" href="#Daf.Views.ALL_VECTORS"><code>Daf.Views.ALL_VECTORS</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A pair to use in the <code>vectors</code> parameter of <a href="views.html#Daf.Views.viewer"><code>viewer</code></a> to specify the view exposes all the vectors of the exposed axes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL62-L64">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Views.ALL_MATRICES" href="#Daf.Views.ALL_MATRICES"><code>Daf.Views.ALL_MATRICES</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A pair to use in the <code>matrices</code> parameter of <a href="views.html#Daf.Views.viewer"><code>viewer</code></a> to specify the view exposes all the matrices of the exposed axes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/views.jl?plain=1#LL67-L69">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="views.html#Daf.Views"><code>Daf.Views</code></a></li><li><a href="views.html#Daf.Views.ALL_AXES"><code>Daf.Views.ALL_AXES</code></a></li><li><a href="views.html#Daf.Views.ALL_MATRICES"><code>Daf.Views.ALL_MATRICES</code></a></li><li><a href="views.html#Daf.Views.ALL_SCALARS"><code>Daf.Views.ALL_SCALARS</code></a></li><li><a href="views.html#Daf.Views.ALL_VECTORS"><code>Daf.Views.ALL_VECTORS</code></a></li><li><a href="views.html#Daf.Views.DafView"><code>Daf.Views.DafView</code></a></li><li><a href="views.html#Daf.Views.viewer"><code>Daf.Views.viewer</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="read_only.html">« Read-only</a><a class="docs-footer-nextpage" href="chains.html">Chains »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
