<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Adapters · Daf.jl v0.1.0</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="Daf.jl v0.1.0 logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Daf.jl v0.1.0</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Daf</a></li><li><a class="tocitem" href="data.html">Data</a></li><li><a class="tocitem" href="read_only.html">Read-only</a></li><li><a class="tocitem" href="views.html">Views</a></li><li><a class="tocitem" href="chains.html">Chains</a></li><li><a class="tocitem" href="computations.html">Computations</a></li><li><a class="tocitem" href="copies.html">Copies</a></li><li class="is-active"><a class="tocitem" href="adapters.html">Adapters</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="contracts.html">Contracts</a></li><li><a class="tocitem" href="formats.html">Formats</a></li><li><a class="tocitem" href="memory_format.html">Memory Format</a></li><li><a class="tocitem" href="queries.html">Queries</a></li><li><a class="tocitem" href="registry.html">Operations registry</a></li><li><a class="tocitem" href="operations.html">Query operations</a></li><li><a class="tocitem" href="storage_types.html">Storage types</a></li><li><a class="tocitem" href="matrix_layouts.html">Matrix layouts</a></li><li><a class="tocitem" href="oprec.html">Operator precedence parser</a></li><li><a class="tocitem" href="messages.html">Messages</a></li><li><a class="tocitem" href="example_data.html">Example data</a></li><li><a class="tocitem" href="todo.html">TODO</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="adapters.html">Adapters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="adapters.html">Adapters</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tanaylab/Daf.jl/blob/main/src/adapters.md?plain=1#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Adapters"><a class="docs-heading-anchor" href="#Adapters">Adapters</a><a id="Adapters-1"></a><a class="docs-heading-anchor-permalink" href="#Adapters" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Daf.Adapters" href="#Daf.Adapters"><code>Daf.Adapters</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Adapt <code>daf</code> data to a <a href="computations.html#Daf.Computations.@computation"><code>@computation</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/adapters.jl?plain=1#LL1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.Adapters.adapter" href="#Daf.Adapters.adapter"><code>Daf.Adapters.adapter</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">adapter(
    computation::Function,
    name::AbstractString,
    view::Union{DafView, ReadOnlyView},
    [capture=MemoryDaf,
    scalars::AbstractVector{Pair{String, Union{String, Nothing}}} = [],
    axes::AbstractVector{Pair{String, Union{String, Nothing}}} = [],
    vectors::AbstractVector{Pair{Tuple{String, String}, Union{String, Nothing}}} = []],
    matrices::AbstractVector{Pair{Tuple{String, String, String}, Union{String, Nothing}}} = [],
    relayout::Bool = true,
    overwrite::Bool = false]
)::Any</code></pre><p>Invoke a computation on a <code>view</code> data set and return the result; copy a <a href="views.html#Daf.Views.viewer"><code>viewer</code></a> of the updated data set into the base <code>daf</code> data of the view.</p><p>If you have some <code>daf</code> data you wish to run a computation on, you need to deal with name mismatches. That is, the names of the input and output data properties of the computation may be different from these used in your data. In addition, you might be interested only in a subset of the computed data properties, to avoiding polluting your data set with irrelevant properties.</p><p>To address these issues, the common idiom for applying computations to <code>daf</code> data is to use the <code>adapter</code> as follows:</p><ul><li><p>Create a (read-only) <code>view</code> of your data which presents the data properties under the names expected by the computation, using <a href="views.html#Daf.Views.viewer"><code>viewer</code></a>. If the computation was annotated by <code>@computation</code>, then its <a href="contracts.html#Daf.Contracts.Contract"><code>Contract</code></a> will be explicitly documented so you will know exactly what to provide.</p></li><li><p>Pass this <code>view</code> to <code>adapter</code>, which will invoke the <code>computation</code> with a (writable) <code>adapted</code> version of the data (created using <a href="chains.html#Daf.Chains.chain_writer"><code>chain_writer</code></a> and a new <code>DafWriter</code> to <code>capture</code> the output, by default, [<code>MemoryDaf</code>]@(ref)).</p></li><li><p>Once the computation is done, create a new view of the output, which presents the subset of the output data properties you are interested in, with the names you would like to store them as. Again, if the computation was annotated by <a href="computations.html#Daf.Computations.@computation"><code>@computation</code></a>, then its <a href="contracts.html#Daf.Contracts.Contract"><code>Contract</code></a> will be explicitly documented so you will know exactly what to expect.</p></li><li><p>Copy this output view data into the base <code>daf</code> data of the <code>view</code> (using <a href="copies.html#Daf.Copies.copy_all!"><code>copy_all!</code></a>, <code>relayout</code> (default: <code>true</code>) and <code>overwrite</code> (default: <code>false</code>).</p></li></ul><p>That is, the code would look something like this:</p><pre><code class="nohighlight hljs">daf = ... # Some input `daf` data we wish to compute on.

# Here `daf` contains the inputs for the computation, but possibly
# under a different name.

result = adapter(
    &quot;example&quot;,      # A name to use to generate the temporary `daf` data names.
    view(daf; ...), # How to view the input in the way expected by the computation.
    ...,            # How and what to view the output for copying back into `daf`.
) do adapted        # The writable adapted data we can pass to the computation.
    computation(adapted, ...)  # Actually do the computation.
    return ...                 # An additional result outside `daf`.
end

# Here `daf` will contain the specific renamed outputs specified in `adapter`,
# and you can also access the additional non-`daf` data `result`.</code></pre><p>This idiom allows <a href="computations.html#Daf.Computations.@computation"><code>@computation</code></a> functions to use clear generic names for their inputs and outputs, and still apply them to arbitrary data sets using more specific names. For example, one can invoke the same computation with different parameter values, and store the different results in the same data set under different names. Or, one can pre-process the inputs of the computation, storing the result under a different name, and still be able to apply the computation to these modified inputs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/adapters.jl?plain=1#LL16-L80">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="copies.html">« Copies</a><a class="docs-footer-nextpage" href="contracts.html">Contracts »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
