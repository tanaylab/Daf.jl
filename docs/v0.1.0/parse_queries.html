<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Queries · Daf.jl v0.1.0</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="Daf.jl v0.1.0 logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Daf.jl v0.1.0</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Daf</a></li><li><a class="tocitem" href="data.html">Data</a></li><li><a class="tocitem" href="read_only.html">Read-only</a></li><li><a class="tocitem" href="views.html">Views</a></li><li><a class="tocitem" href="chains.html">Chains</a></li><li><a class="tocitem" href="computations.html">Computations</a></li><li><a class="tocitem" href="groups.html">Groups</a></li><li><a class="tocitem" href="copies.html">Copies</a></li><li><a class="tocitem" href="adapters.html">Adapters</a></li><li><a class="tocitem" href="contracts.html">Contracts</a></li><li><a class="tocitem" href="formats.html">Formats</a></li><li><a class="tocitem" href="memory_format.html">Memory Format</a></li><li><a class="tocitem" href="data_queries.html">Data Queries</a></li><li class="is-active"><a class="tocitem" href="parse_queries.html">Queries</a><ul class="internal"><li><a class="tocitem" href="#Queries-syntax"><span>Queries syntax</span></a></li><li><a class="tocitem" href="#Matrix-queries"><span>Matrix queries</span></a></li><li><a class="tocitem" href="#Vector-queries"><span>Vector queries</span></a></li><li><a class="tocitem" href="#Scalar-queries"><span>Scalar queries</span></a></li><li><a class="tocitem" href="#Filtering-axes"><span>Filtering axes</span></a></li><li><a class="tocitem" href="#Slicing-axes"><span>Slicing axes</span></a></li><li><a class="tocitem" href="#Looking-up-properties"><span>Looking up properties</span></a></li><li><a class="tocitem" href="#Query-operations"><span>Query operations</span></a></li><li><a class="tocitem" href="#Canonical-format"><span>Canonical format</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="registry.html">Operations registry</a></li><li><a class="tocitem" href="operations.html">Query operations</a></li><li><a class="tocitem" href="storage_types.html">Storage types</a></li><li><a class="tocitem" href="matrix_layouts.html">Matrix layouts</a></li><li><a class="tocitem" href="oprec.html">Operator precedence parser</a></li><li><a class="tocitem" href="messages.html">Messages</a></li><li><a class="tocitem" href="example_data.html">Example data</a></li><li><a class="tocitem" href="todo.html">TODO</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="parse_queries.html">Queries</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="parse_queries.html">Queries</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.md?plain=1#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Queries"><a class="docs-heading-anchor" href="#Queries">Queries</a><a id="Queries-1"></a><a class="docs-heading-anchor-permalink" href="#Queries" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries" href="#Daf.ParseQueries"><code>Daf.ParseQueries</code></a> — <span class="docstring-category">Module</span></header><section><div><p><code>Daf</code> provides a query language that allows for convenient extraction of data from the <code>Storage</code>. This isn&#39;t a &quot;beautiful&quot; query language, but it is terse, consistent, and reasonably flexible.</p><p>We use an operator precedence parser for queries. That is, one can think of a query as an expression, using specific operators that combine into the overall query expression. For example, the query <code>cell @ batch</code> can be thought of as the expression <code>@(&quot;cell&quot;, &quot;batch&quot;)</code> which means &quot;lookup the value of the property <code>batch</code> for each entry of the <code>cell</code> axis&quot;.</p><p>We separately describe queries that produce matrix data (<a href="parse_queries.html#Daf.ParseQueries.MatrixQuery"><code>MatrixQuery</code></a>), vector data (<a href="parse_queries.html#Daf.ParseQueries.VectorQuery"><code>VectorQuery</code></a>), and scalar data (<a href="parse_queries.html#Daf.ParseQueries.ScalarQuery"><code>ScalarQuery</code></a>).</p><p>When parsing a query, we will will properly encode escaped characters, treat any <code>#...&lt;LineBreak&gt;</code> characters sequence as white space, and also condense all consecutive white space characters into a single space (which will convert the query string to a single line). This allows using arbitrary comments, white space and line breaks in complex queries, and also allows error messages to visually refer to the part of the query that triggered them, without having to deal with thorny issues of visually indicating messages inside multi-line query strings. This comes at the cost that the error messages refer to the one-line version of the query string, instead of the original.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1-L19">source</a></section></article><h2 id="Queries-syntax"><a class="docs-heading-anchor" href="#Queries-syntax">Queries syntax</a><a id="Queries-syntax-1"></a><a class="docs-heading-anchor-permalink" href="#Queries-syntax" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryOperators" href="#Daf.ParseQueries.QueryOperators"><code>Daf.ParseQueries.QueryOperators</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The operators that can be used in a <code>Daf</code> query.</p><table><tr><th style="text-align: center">Operator</th><th style="text-align: center">Associativity</th><th style="text-align: center">Precedence</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: center"><code>%&gt;</code></td><td style="text-align: center">Left</td><td style="text-align: center">0</td><td style="text-align: left">Reduction operation (matrix to vector, vector to scalar), e.g., <code>cell, gene @ UMIs %&gt; Sum</code></td></tr><tr><td style="text-align: center"><code>%</code></td><td style="text-align: center">Right</td><td style="text-align: center">1</td><td style="text-align: left">Element-wise operation (e.g., <code>cell, gene @ UMIs % Log</code>)</td></tr><tr><td style="text-align: center"><code>@</code></td><td style="text-align: center">Right</td><td style="text-align: center">2</td><td style="text-align: left">Lookup (e.g., <code>cell, gene @ UMIs</code>)</td></tr><tr><td style="text-align: center"><code>;</code></td><td style="text-align: center">Right</td><td style="text-align: center">3</td><td style="text-align: left">Operation separator (e.g., <code>Log; base = 2</code>)</td></tr><tr><td style="text-align: center"><code>,</code></td><td style="text-align: center">Right</td><td style="text-align: center">3</td><td style="text-align: left">1. Axes separator (e.g., <code>cell, gene @ UMIs</code>)</td></tr><tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">3</td><td style="text-align: left">2. Parameter separator (e.g., <code>Log; base = 2, eps = 1</code>)</td></tr><tr><td style="text-align: center"><code>&amp;</code></td><td style="text-align: center">Right</td><td style="text-align: center">4</td><td style="text-align: left">AND filter (e.g., <code>gene &amp; marker</code>)</td></tr><tr><td style="text-align: center"><code>|</code></td><td style="text-align: center">Right</td><td style="text-align: center">4</td><td style="text-align: left">OR filter (e.g., <code>gene &amp; marker | noisy</code>)</td></tr><tr><td style="text-align: center"><code>^</code></td><td style="text-align: center">Right</td><td style="text-align: center">4</td><td style="text-align: left">XOR filter (e.g., <code>gene &amp; marker ^ noisy</code>)</td></tr><tr><td style="text-align: center"><code>&lt;</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Less than (e.g., <code>batch : age &lt; 1</code>)</td></tr><tr><td style="text-align: center"><code>&lt;=</code>, <code>≤</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Less or equal (e.g., <code>batch : age &lt;= 1</code>)</td></tr><tr><td style="text-align: center"><code>!=</code>, <code>≠</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Not equal (e.g., <code>batch : age != 1</code>)</td></tr><tr><td style="text-align: center"><code>=</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">1. Is equal (e.g., <code>batch : age = 1</code>)</td></tr><tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: left">2. Select axis entry (e.g., <code>cell, gene = FOX1 @ UMIs</code>)</td></tr><tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: left">3. Parameter assignment (e.g., <code>Log; base = 2</code>)</td></tr><tr><td style="text-align: center"><code>&gt;=</code>, <code>≥</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Greater or equal (e.g., <code>batch : age &gt;= 1</code>)</td></tr><tr><td style="text-align: center"><code>&gt;</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Greater than (e.g., <code>batch : age &gt; 1</code>)</td></tr><tr><td style="text-align: center"><code>!~</code>, <code>≁</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Not match (e.g., <code>gene !~ MT-.\*</code></td></tr><tr><td style="text-align: center"><code>~</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">1. Match (e.g., <code>gene ~ MT-.\*</code>)</td></tr><tr><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: left">2. Invert mask (prefix; e.g., <code>gene &amp; ~noisy</code>)</td></tr><tr><td style="text-align: center"><code>?</code></td><td style="text-align: center">Right</td><td style="text-align: center">5</td><td style="text-align: left">Chained property default (e.g., <code>cell : metacell : color ? black</code>)</td></tr><tr><td style="text-align: center"><code>:</code></td><td style="text-align: center">Right</td><td style="text-align: center">6</td><td style="text-align: left">Chained property lookup (e.g., <code>batch : age</code>)</td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL75-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryOperator" href="#Daf.ParseQueries.QueryOperator"><code>Daf.ParseQueries.QueryOperator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">QueryOperator = Operator{QueryOperators}</code></pre><p>A description of one of the <a href="parse_queries.html#Daf.ParseQueries.QueryOperators"><code>QueryOperators</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL139-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryOperation" href="#Daf.ParseQueries.QueryOperation"><code>Daf.ParseQueries.QueryOperation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">QueryOperation = Operation{QueryOperators}</code></pre><p>A non-leaf node in a <a href="parse_queries.html#Daf.ParseQueries.QueryExpression"><code>QueryExpression</code></a> tree.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL123-L127">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryToken" href="#Daf.ParseQueries.QueryToken"><code>Daf.ParseQueries.QueryToken</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">QueryToken = Token{QueryOperators}</code></pre><p>A leaf node in a <a href="parse_queries.html#Daf.ParseQueries.QueryExpression"><code>QueryExpression</code></a> tree.</p><p>This will capture any sequence of <a href="oprec.html#Daf.Oprec.is_safe_query_char"><code>safe</code></a> or <a href="oprec.html#Daf.Oprec.escape_query"><code>escaped</code></a> characters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL130-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryExpression" href="#Daf.ParseQueries.QueryExpression"><code>Daf.ParseQueries.QueryExpression</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">QueryExpression = Expression{QueryOperators}</code></pre><p>An expression tree for a <code>Daf</code> query.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL116-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.QueryContext" href="#Daf.ParseQueries.QueryContext"><code>Daf.ParseQueries.QueryContext</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">QueryContext = Context{QueryOperators}</code></pre><p>Context for reporting errors while parsing a query.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL109-L113">source</a></section></article><h2 id="Matrix-queries"><a class="docs-heading-anchor" href="#Matrix-queries">Matrix queries</a><a id="Matrix-queries-1"></a><a class="docs-heading-anchor-permalink" href="#Matrix-queries" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.parse_matrix_query" href="#Daf.ParseQueries.parse_matrix_query"><code>Daf.ParseQueries.parse_matrix_query</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_matrix_query(query_string::AbstractString)::MatrixQuery</code></pre><p>Parse a <a href="parse_queries.html#Daf.ParseQueries.MatrixQuery"><code>MatrixQuery</code></a> from a query string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL839-L843">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixQuery" href="#Daf.ParseQueries.MatrixQuery"><code>Daf.ParseQueries.MatrixQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixQuery</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixDataLookup"><code>MatrixDataLookup</code></a> ( <code>%</code> <a href="parse_queries.html#Daf.ParseQueries.parse_eltwise_operation"><code>EltwiseOperation</code></a> )*</p><p>A query that returns matrix data.</p><p>There&#39;s only one variant of this: looking up a matrix property and optionally passing it through a sequence of element-wise operations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL810-L817">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixDataLookup" href="#Daf.ParseQueries.MatrixDataLookup"><code>Daf.ParseQueries.MatrixDataLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixDataLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixPropertyLookup"><code>MatrixPropertyLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.MatrixCounts"><code>MatrixCounts</code></a></p><p>Lookup matrix data. This can be looking up a matrix property, or computing counts of the combinations of two properties of the same axis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL780-L785">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixPropertyLookup" href="#Daf.ParseQueries.MatrixPropertyLookup"><code>Daf.ParseQueries.MatrixPropertyLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixPropertyLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixAxes"><code>MatrixAxes</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>)</p><p>Lookup a matrix property (that is, a property that gives a value to each combination of entries of two axes).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL677-L681">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixAxes" href="#Daf.ParseQueries.MatrixAxes"><code>Daf.ParseQueries.MatrixAxes</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixAxes</code> = <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a> <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a></p><p>(Possibly filtered) axes of matrix to lookup a property for.</p><p>The first axis specifies the matrix rows, the second axis specifies the matrix columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL649-L655">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixCounts" href="#Daf.ParseQueries.MatrixCounts"><code>Daf.ParseQueries.MatrixCounts</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixCounts</code> = <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.CountedAxes"><code>CountedAxes</code></a></p><p>Generate a matrix of counts of entries of a base axis which have each combination of two properties.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL762-L766">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.CountedAxes" href="#Daf.ParseQueries.CountedAxes"><code>Daf.ParseQueries.CountedAxes</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>CountedAxes</code> = <a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>PropertyLookup</code></a> <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>PropertyLookup</code></a></p><p>The two axes of a matrix of counts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL733-L737">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.CountedAxis" href="#Daf.ParseQueries.CountedAxis"><code>Daf.ParseQueries.CountedAxis</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>CountedAxis</code> = <a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>PropertyLookup</code></a> ( <code>?</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>axis default</em>) )?</p><p>An axis of a matrix of counts, with an optional default for missing values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL695-L699">source</a></section></article><h2 id="Vector-queries"><a class="docs-heading-anchor" href="#Vector-queries">Vector queries</a><a id="Vector-queries-1"></a><a class="docs-heading-anchor-permalink" href="#Vector-queries" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.parse_vector_query" href="#Daf.ParseQueries.parse_vector_query"><code>Daf.ParseQueries.parse_vector_query</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_vector_query(query_string::AbstractString)::VectorQuery</code></pre><p>Parse a <a href="parse_queries.html#Daf.ParseQueries.VectorQuery"><code>VectorQuery</code></a> from a query string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1077-L1081">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.VectorQuery" href="#Daf.ParseQueries.VectorQuery"><code>Daf.ParseQueries.VectorQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>VectorQuery</code> = <a href="parse_queries.html#Daf.ParseQueries.VectorDataLookup"><code>VectorDataLookup</code></a> ( <code>%</code> <a href="parse_queries.html#Daf.ParseQueries.parse_eltwise_operation"><code>EltwiseOperation</code></a> )*</p><p>A query that returns vector data. This looks up some vector data and optionally applies a series of element-wise operations to it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1017-L1022">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.VectorDataLookup" href="#Daf.ParseQueries.VectorDataLookup"><code>Daf.ParseQueries.VectorDataLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>VectorDataLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.VectorPropertyLookup"><code>VectorPropertyLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.MatrixSliceLookup"><code>MatrixSliceLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.ReduceMatrixQuery"><code>ReduceMatrixQuery</code></a></p><p>Lookup vector data. This can be looking up a vector property, looking up a slice of a matrix property, or reducing the results of matrix query to a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1000-L1005">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.VectorPropertyLookup" href="#Daf.ParseQueries.VectorPropertyLookup"><code>Daf.ParseQueries.VectorPropertyLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>VectorPropertyLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.AxisLookup"><code>AxisLookup</code></a></p><p>Lookup a vector property (that is, a property that gives a value to each entry of an axis).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL862-L866">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixSliceLookup" href="#Daf.ParseQueries.MatrixSliceLookup"><code>Daf.ParseQueries.MatrixSliceLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixSliceLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixSliceAxes"><code>MatrixSliceAxes</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>)</p><p>Lookup a vector slice of a matrix property.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL949-L953">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixSliceAxes" href="#Daf.ParseQueries.MatrixSliceAxes"><code>Daf.ParseQueries.MatrixSliceAxes</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixSliceAxes</code> = <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a> <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.AxisEntry"><code>AxisEntry</code></a></p><p>(Possibly filtered) axes of a slice of a matrix to lookup a property for.</p><p>The first axis specifies the result entries, and the second specifies the specific entry of an axis to slice.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL921-L927">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ReduceMatrixQuery" href="#Daf.ParseQueries.ReduceMatrixQuery"><code>Daf.ParseQueries.ReduceMatrixQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ReduceMatrixQuery</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixQuery"><code>MatrixQuery</code></a> <code>%&gt;</code> <a href="parse_queries.html#Daf.ParseQueries.parse_reduction_operation"><code>ReductionOperation</code></a></p><p>Query for matrix data and reduce it to a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL982-L986">source</a></section></article><h2 id="Scalar-queries"><a class="docs-heading-anchor" href="#Scalar-queries">Scalar queries</a><a id="Scalar-queries-1"></a><a class="docs-heading-anchor-permalink" href="#Scalar-queries" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.parse_scalar_query" href="#Daf.ParseQueries.parse_scalar_query"><code>Daf.ParseQueries.parse_scalar_query</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_scalar_query(query_string::AbstractString)::ScalarQuery</code></pre><p>Parse a <a href="parse_queries.html#Daf.ParseQueries.ScalarQuery"><code>ScalarQuery</code></a> from a query string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1248-L1252">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ScalarQuery" href="#Daf.ParseQueries.ScalarQuery"><code>Daf.ParseQueries.ScalarQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ScalarQuery</code> = <a href="parse_queries.html#Daf.ParseQueries.ScalarDataLookup"><code>ScalarDataLookup</code></a> ( <code>%</code> <a href="parse_queries.html#Daf.ParseQueries.parse_eltwise_operation"><code>EltwiseOperation</code></a> )*</p><p>A query that returns scalar data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1230-L1234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ScalarDataLookup" href="#Daf.ParseQueries.ScalarDataLookup"><code>Daf.ParseQueries.ScalarDataLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ScalarDataLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.ScalarPropertyLookup"><code>ScalarPropertyLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.ReduceVectorQuery"><code>ReduceVectorQuery</code></a> | <a href="parse_queries.html#Daf.ParseQueries.VectorEntryLookup"><code>VectorEntryLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.MatrixEntryLookup"><code>MatrixEntryLookup</code></a></p><p>Lookup scalar data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1213-L1217">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ScalarPropertyLookup" href="#Daf.ParseQueries.ScalarPropertyLookup"><code>Daf.ParseQueries.ScalarPropertyLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ScalarPropertyLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>)</p><p>Lookup a scalar property.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1100-L1104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ReduceVectorQuery" href="#Daf.ParseQueries.ReduceVectorQuery"><code>Daf.ParseQueries.ReduceVectorQuery</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ReduceVectorQuery</code> = <a href="parse_queries.html#Daf.ParseQueries.VectorQuery"><code>VectorQuery</code></a> <code>%&gt;</code> <a href="parse_queries.html#Daf.ParseQueries.parse_reduction_operation"><code>ReductionOperation</code></a></p><p>Query for vector data and reduce it to a scalar. The vector query may itself be a reduction of a matrix to a vector, allowing reducing a matrix to a scalar (in two reduction steps).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1198-L1203">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.VectorEntryLookup" href="#Daf.ParseQueries.VectorEntryLookup"><code>Daf.ParseQueries.VectorEntryLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>VectorEntryLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.AxisEntry"><code>AxisEntry</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.AxisLookup"><code>AxisLookup</code></a></p><p>Lookup an entry of a vector property.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1117-L1121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixEntryLookup" href="#Daf.ParseQueries.MatrixEntryLookup"><code>Daf.ParseQueries.MatrixEntryLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixEntryLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.MatrixEntryAxes"><code>MatrixEntryAxes</code></a> <code>@</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>)</p><p>Lookup an entry of a matrix property.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1169-L1173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.MatrixEntryAxes" href="#Daf.ParseQueries.MatrixEntryAxes"><code>Daf.ParseQueries.MatrixEntryAxes</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>MatrixEntryAxes</code> = <a href="parse_queries.html#Daf.ParseQueries.AxisEntry"><code>AxisEntry</code></a> <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.AxisEntry"><code>AxisEntry</code></a></p><p>Locate a single entry of both axes of a matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL1143-L1147">source</a></section></article><h2 id="Filtering-axes"><a class="docs-heading-anchor" href="#Filtering-axes">Filtering axes</a><a id="Filtering-axes-1"></a><a class="docs-heading-anchor-permalink" href="#Filtering-axes" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.FilteredAxis" href="#Daf.ParseQueries.FilteredAxis"><code>Daf.ParseQueries.FilteredAxis</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>FilteredAxis</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>axis name</em>) <a href="parse_queries.html#Daf.ParseQueries.AxisFilter"><code>AxisFilter</code></a>*</p><p>(Possibly filtered) axis to lookup a property for.</p><p>By default, all the axis entries will be used. Applying a filter will restrict the results just to the axis entries that match the result of the filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL594-L601">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.AxisFilter" href="#Daf.ParseQueries.AxisFilter"><code>Daf.ParseQueries.AxisFilter</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>AxisFilter</code> = <a href="parse_queries.html#Daf.ParseQueries.FilterOperator"><code>FilterOperator</code></a> <a href="parse_queries.html#Daf.ParseQueries.AxisLookup"><code>AxisLookup</code></a></p><p>A filter to apply to an axis.</p><p>By default we fetch results for each entry of each axis. We can restrict the set of entries we fetch results for by applying filters. Each filter applies a Boolean mask to the set of entries we&#39;ll return results for. Filters are applied in a strict left to right order. Each filter can restrict the set of entries (<code>&amp;</code>, AND), increase it (<code>|</code>, OR) or flip entries (<code>^</code>, XOR). For example, <code>gene &amp; noisy | lateral &amp; ~ marker</code> will start with all the genes, restrict the set to just the noisy genes, increase the set to also include lateral genes, and finally decrease the set to exclude marker genes. That is, it will return the set of non-marker genes that are also either noisy or lateral.</p><p>If the <a href="parse_queries.html#Daf.ParseQueries.AxisLookup"><code>AxisLookup</code></a> does not specify a <a href="parse_queries.html#Daf.ParseQueries.PropertyComparison"><code>PropertyComparison</code></a>, and the looked up property does not have Boolean values, then the values are converted to Boolean by comparing them with zero (for numeric properties) or the empty string (for string properties).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL558-L573">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.FilterOperator" href="#Daf.ParseQueries.FilterOperator"><code>Daf.ParseQueries.FilterOperator</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>FilterOperator</code> = <code>&amp;</code> | <code>|</code> | <code>^</code></p><p>A Boolean operator for updating the mask of a filter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL547-L551">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.AxisLookup" href="#Daf.ParseQueries.AxisLookup"><code>Daf.ParseQueries.AxisLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>AxisLookup</code> = <code>~</code> <a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>PropertyLookup</code></a> | <a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>PropertyLookup</code></a> <a href="parse_queries.html#Daf.ParseQueries.PropertyComparison"><code>PropertyComparison</code></a>?</p><p>Lookup some value for each entry of an axis.</p><p>This can simply lookup the value of some property of the axis, e.g., <code>batch : age</code>. In addition, we allow extra features for dealing with Boolean masks. First, if looking up a Boolean property, then prefixing it with a <code>~</code> will invert the result, e.g., <code>~ marker</code>. Second, when looking up a non-Boolean property, it is possible to convert it into Boolean values by comparing it with a constant value, e.g., <code>batch : age &gt; 1</code>. This allows us to use the result as a mask, e.g., when filtering which entries of an axis we want to fetch results for.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL459-L469">source</a></section></article><h2 id="Slicing-axes"><a class="docs-heading-anchor" href="#Slicing-axes">Slicing axes</a><a id="Slicing-axes-1"></a><a class="docs-heading-anchor-permalink" href="#Slicing-axes" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.AxisEntry" href="#Daf.ParseQueries.AxisEntry"><code>Daf.ParseQueries.AxisEntry</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>AxisEntry</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>axis name</em>) <code>=</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>entry name</em>)</p><p>Slice a single entry from an axis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL892-L896">source</a></section></article><h2 id="Looking-up-properties"><a class="docs-heading-anchor" href="#Looking-up-properties">Looking up properties</a><a id="Looking-up-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Looking-up-properties" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.PropertyLookup" href="#Daf.ParseQueries.PropertyLookup"><code>Daf.ParseQueries.PropertyLookup</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>PropertyLookup</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>) ( <code>:</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property name</em>) )*</p><p>Lookup the value of some property for a single axis (for vector data) or a pair of axes (for matrix data).</p><p>This is typically just the name of the property to lookup. However, we commonly find that a property of one axis contains names of entries in another axis. For example, we may have a <code>batch</code> property per <code>cell</code>, and an <code>age</code> property per <code>batch</code>. In such cases, we allow a chained lookup of the color of the type of each cell by writing <code>batch : age</code>. The chain can be as long as necessary (e.g., <code>batch : donor : sex</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL339-L348">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.PropertyComparison" href="#Daf.ParseQueries.PropertyComparison"><code>Daf.ParseQueries.PropertyComparison</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>PropertyComparison</code> = <a href="parse_queries.html#Daf.ParseQueries.ComparisonOperator"><code>ComparisonOperator</code></a> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>property value</em>)</p><p>Compare a (non-Boolean) property to a constant value.</p><p>This is used to convert any set of non-Boolean property values for the axis entries into a Boolean mask which we can then use to filter the axis entries, e.g., <code>&gt; 1</code> will create a mask of all the entries whose value is larger than one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL421-L428">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ComparisonOperator" href="#Daf.ParseQueries.ComparisonOperator"><code>Daf.ParseQueries.ComparisonOperator</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ComparisonOperator</code> = <code>&lt;</code> | <code>&lt;=</code> | <code>≤</code> | <code>=</code> | <code>!=</code> | <code>≠</code> | <code>&gt;=</code> | <code>≥</code> | <code>&gt;</code> | <code>~</code> | <code>!~</code> | <code>≁</code> | <code>?</code></p><p>How to compare a each value of a property with some constant value to generate a filter mask.</p><p>The <code>?</code> operator is special. Instead of comparing the values, it replaces missing values with a default values. Normally, when using a chained <code>PropertyLookup</code>, it is an error if some entries hold an empty value. The <code>?</code> operator allows for such cases by using a default value for the end result. For example, <code>cell : metacell : type : color</code> will fail with an error if a specific <code>cell</code> has a <code>metacell</code> value <code>&quot;&quot;</code>. However,  <code>cell : metacell : type : color ? black</code> will return a value of <code>black</code> for such cells instead.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>For matching (using <code>~</code> or <code>!~</code>), you will have to <a href="oprec.html#Daf.Oprec.escape_query"><code>escape</code></a> any special characters used in regexp; for example, you will need to write <code>raw&quot;gene ~ RP\[LS\].\*&quot;</code> to match all the ribosomal gene names.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL379-L394">source</a></section></article><h2 id="Query-operations"><a class="docs-heading-anchor" href="#Query-operations">Query operations</a><a id="Query-operations-1"></a><a class="docs-heading-anchor-permalink" href="#Query-operations" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.parse_eltwise_operation" href="#Daf.ParseQueries.parse_eltwise_operation"><code>Daf.ParseQueries.parse_eltwise_operation</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>EltwiseOperation</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<a href="registry.html#Daf.Registry.EltwiseOperation"><code>EltwiseOperation</code></a>) ( <code>;</code> <a href="parse_queries.html#Daf.ParseQueries.ParameterAssignment"><code>ParameterAssignment</code></a> ( <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.ParameterAssignment"><code>ParameterAssignment</code></a> )* )?</p><p>Parse a <a href="registry.html#Daf.Registry.EltwiseOperation"><code>EltwiseOperation</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL280-L284">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.parse_reduction_operation" href="#Daf.ParseQueries.parse_reduction_operation"><code>Daf.ParseQueries.parse_reduction_operation</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>ReductionOperation</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<a href="registry.html#Daf.Registry.ReductionOperation"><code>ReductionOperation</code></a>) ( <code>;</code> <a href="parse_queries.html#Daf.ParseQueries.ParameterAssignment"><code>ParameterAssignment</code></a> ( <code>,</code> <a href="parse_queries.html#Daf.ParseQueries.ParameterAssignment"><code>ParameterAssignment</code></a> )* )?</p><p>Parse a <a href="registry.html#Daf.Registry.ReductionOperation"><code>ReductionOperation</code></a>. This will reduce a vector to a scalar, or each column of a matrix to a single value (that is, a matrix to a vector).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL293-L298">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.ParameterAssignment" href="#Daf.ParseQueries.ParameterAssignment"><code>Daf.ParseQueries.ParameterAssignment</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ParameterAssignment</code> = <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>parameter name</em>) <code>=</code> <a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>QueryToken</code></a>(<em>parameter value</em>)</p><pre><code class="nohighlight hljs">struct ParameterAssignment
    assignment::QueryOperation
end</code></pre><p>Assignment of a value to a single parameter of an element-wise or reduction operation. This is provided to the constructors of <a href="registry.html#Daf.Registry.EltwiseOperation"><code>EltwiseOperation</code></a>s and <a href="registry.html#Daf.Registry.ReductionOperation"><code>ReductionOperation</code></a>s. The constructors will convert the string parameter value to the appropriate parameter type, and will generate error messages in context if the value is invalid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL178-L188">source</a></section></article><h2 id="Canonical-format"><a class="docs-heading-anchor" href="#Canonical-format">Canonical format</a><a id="Canonical-format-1"></a><a class="docs-heading-anchor-permalink" href="#Canonical-format" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Daf.ParseQueries.canonical" href="#Daf.ParseQueries.canonical"><code>Daf.ParseQueries.canonical</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function canonical(query::Union{MatrixQuery, VectorQuery, ScalarQuery})::String</code></pre><p>Return a canonical form for a query. This strips away any comments, uses a standard white space policy between tokens, and even reorders <a href="parse_queries.html#Daf.ParseQueries.AxisFilter"><code>AxisFilter</code></a>s in a <a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>FilteredAxis</code></a> where possible, so that if two queries are &quot;the same&quot;, they will have the same <code>canonical</code> form.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tanaylab/Daf.jl/blob/main/src/parse_queries.jl?plain=1#LL307-L313">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="parse_queries.html#Daf.ParseQueries"><code>Daf.ParseQueries</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.AxisEntry"><code>Daf.ParseQueries.AxisEntry</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.AxisFilter"><code>Daf.ParseQueries.AxisFilter</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.AxisLookup"><code>Daf.ParseQueries.AxisLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ComparisonOperator"><code>Daf.ParseQueries.ComparisonOperator</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.CountedAxes"><code>Daf.ParseQueries.CountedAxes</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.CountedAxis"><code>Daf.ParseQueries.CountedAxis</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.FilterOperator"><code>Daf.ParseQueries.FilterOperator</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.FilteredAxis"><code>Daf.ParseQueries.FilteredAxis</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixAxes"><code>Daf.ParseQueries.MatrixAxes</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixCounts"><code>Daf.ParseQueries.MatrixCounts</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixDataLookup"><code>Daf.ParseQueries.MatrixDataLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixEntryAxes"><code>Daf.ParseQueries.MatrixEntryAxes</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixEntryLookup"><code>Daf.ParseQueries.MatrixEntryLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixPropertyLookup"><code>Daf.ParseQueries.MatrixPropertyLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixQuery"><code>Daf.ParseQueries.MatrixQuery</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixSliceAxes"><code>Daf.ParseQueries.MatrixSliceAxes</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.MatrixSliceLookup"><code>Daf.ParseQueries.MatrixSliceLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ParameterAssignment"><code>Daf.ParseQueries.ParameterAssignment</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.PropertyComparison"><code>Daf.ParseQueries.PropertyComparison</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.PropertyLookup"><code>Daf.ParseQueries.PropertyLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryContext"><code>Daf.ParseQueries.QueryContext</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryExpression"><code>Daf.ParseQueries.QueryExpression</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryOperation"><code>Daf.ParseQueries.QueryOperation</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryOperator"><code>Daf.ParseQueries.QueryOperator</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryOperators"><code>Daf.ParseQueries.QueryOperators</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.QueryToken"><code>Daf.ParseQueries.QueryToken</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ReduceMatrixQuery"><code>Daf.ParseQueries.ReduceMatrixQuery</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ReduceVectorQuery"><code>Daf.ParseQueries.ReduceVectorQuery</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ScalarDataLookup"><code>Daf.ParseQueries.ScalarDataLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ScalarPropertyLookup"><code>Daf.ParseQueries.ScalarPropertyLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.ScalarQuery"><code>Daf.ParseQueries.ScalarQuery</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.VectorDataLookup"><code>Daf.ParseQueries.VectorDataLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.VectorEntryLookup"><code>Daf.ParseQueries.VectorEntryLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.VectorPropertyLookup"><code>Daf.ParseQueries.VectorPropertyLookup</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.VectorQuery"><code>Daf.ParseQueries.VectorQuery</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.canonical"><code>Daf.ParseQueries.canonical</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.parse_eltwise_operation"><code>Daf.ParseQueries.parse_eltwise_operation</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.parse_matrix_query"><code>Daf.ParseQueries.parse_matrix_query</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.parse_reduction_operation"><code>Daf.ParseQueries.parse_reduction_operation</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.parse_scalar_query"><code>Daf.ParseQueries.parse_scalar_query</code></a></li><li><a href="parse_queries.html#Daf.ParseQueries.parse_vector_query"><code>Daf.ParseQueries.parse_vector_query</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="data_queries.html">« Data Queries</a><a class="docs-footer-nextpage" href="registry.html">Operations registry »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
